// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "accounting-agent/web/templates/layouts"

// ChatHome is the full-screen AI chat home page (GET /).
// It uses ChatLayout and manages conversation state in Alpine.js backed by sessionStorage.
func ChatHome(username string, companyName string, companyCode string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"flex-1 flex flex-col overflow-hidden\" x-data=\"chatHome()\" x-init=\"init()\"><!-- Message thread (scrollable) --><div class=\"flex-1 overflow-y-auto\" id=\"chat-thread\"><!-- Welcome state â€” shown when no messages yet --><div class=\"h-full flex flex-col items-center justify-center px-6 py-12\" x-show=\"messages.length === 0\"><div class=\"text-4xl mb-4\">âœ¨</div><h1 class=\"text-2xl font-semibold text-slate-800 mb-2\">Hi, I'm your AI assistant</h1><p class=\"text-slate-500 text-center max-w-md mb-8\">Ask me about accounts, orders, vendors, stock levels â€” or describe a transaction and I'll help you post it.</p><!-- Quick-action chips --><div class=\"flex flex-wrap gap-2 justify-center max-w-lg\"><button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('Show trial balance')\">âš–ï¸ Trial Balance</button> <button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('Show P&amp;L report for this month')\">ğŸ“ˆ P&amp;L Report</button> <button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('Show balance sheet')\">ğŸ“‘ Balance Sheet</button> <button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('List open purchase orders')\">ğŸ“¦ Open POs</button> <button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('Show current stock levels')\">ğŸ“Š Stock Levels</button> <button class=\"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-xl transition-colors\" x-on:click=\"quickSend('I need to post a journal entry')\">ğŸ“ Journal Entry</button></div></div><!-- Message list --><div class=\"px-4 py-4 space-y-3 max-w-3xl mx-auto\" x-show=\"messages.length > 0\"><template x-for=\"(msg, idx) in messages\" :key=\"idx\"><div><!-- User bubble --><template x-if=\"msg.role === 'user'\"><div class=\"flex justify-end\"><div class=\"max-w-[75%] bg-slate-900 text-white rounded-2xl rounded-tr-sm px-4 py-2.5 text-sm\" x-text=\"msg.text\"></div></div></template><!-- AI text bubble --><template x-if=\"msg.role === 'ai' && msg.type === 'text'\"><div class=\"flex justify-start\"><div class=\"max-w-[75%] bg-slate-100 text-slate-800 rounded-2xl rounded-tl-sm px-4 py-2.5 text-sm whitespace-pre-wrap\" x-html=\"msg.html || msg.text\"></div></div></template><!-- Action card (write tool proposal) --><template x-if=\"msg.role === 'ai' && msg.type === 'action_card'\"><div class=\"border border-amber-200 bg-amber-50 rounded-2xl p-4 max-w-sm\"><div class=\"flex items-center gap-2 mb-2\"><span class=\"text-base\">ğŸ”§</span> <span class=\"text-sm font-semibold text-amber-900\" x-text=\"toolLabel(msg.tool)\"></span></div><pre class=\"text-xs text-amber-700 bg-amber-100 rounded-lg p-2 overflow-auto max-h-40 mb-3\" x-text=\"JSON.stringify(msg.args, null, 2)\"></pre><div x-show=\"msg.status === undefined || msg.status === 'pending'\" class=\"flex gap-2\"><button class=\"flex-1 px-3 py-1.5 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 transition-colors\" x-on:click=\"confirmAction(msg, 'confirm')\">âœ“ Confirm</button> <button class=\"px-3 py-1.5 border border-amber-300 text-amber-700 text-sm rounded-lg hover:bg-amber-100 transition-colors\" x-on:click=\"confirmAction(msg, 'cancel')\">âœ• Cancel</button></div><div x-show=\"msg.status === 'confirmed'\" class=\"text-sm text-green-700 font-medium\">âœ“ <span x-text=\"msg.resultText\"></span></div><div x-show=\"msg.status === 'cancelled'\" class=\"text-sm text-slate-500\">Cancelled.</div><div x-show=\"msg.status === 'error'\" class=\"text-sm text-red-600\">âš  <span x-text=\"msg.resultText\"></span></div></div></template><!-- Journal entry proposal card --><template x-if=\"msg.role === 'ai' && msg.type === 'proposal'\"><div class=\"border border-blue-200 bg-blue-50 rounded-2xl p-4 max-w-sm\"><div class=\"flex items-center gap-2 mb-2\"><span class=\"text-base\">ğŸ§¾</span> <span class=\"text-sm font-semibold text-blue-900\">Journal Entry Proposal</span></div><div class=\"text-xs text-blue-700 mb-1\" x-text=\"msg.proposal && msg.proposal.summary\"></div><div class=\"text-xs text-blue-500 mb-3\" x-text=\"'Date: ' + (msg.proposal && msg.proposal.posting_date)\"></div><div x-show=\"msg.status === undefined || msg.status === 'pending'\" class=\"flex gap-2\"><button class=\"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors\" x-on:click=\"confirmAction(msg, 'confirm')\">âœ“ Post Entry</button> <button class=\"px-3 py-1.5 border border-blue-300 text-blue-700 text-sm rounded-lg hover:bg-blue-100 transition-colors\" x-on:click=\"confirmAction(msg, 'cancel')\">âœ• Cancel</button></div><div x-show=\"msg.status === 'confirmed'\" class=\"text-sm text-green-700 font-medium\">âœ“ Journal entry posted.</div><div x-show=\"msg.status === 'cancelled'\" class=\"text-sm text-slate-500\">Cancelled.</div><div x-show=\"msg.status === 'error'\" class=\"text-sm text-red-600\">âš  <span x-text=\"msg.resultText\"></span></div></div></template></div></template><!-- Thinking indicator --><div x-show=\"sending\" class=\"flex justify-start\"><div class=\"bg-slate-100 rounded-2xl rounded-tl-sm px-4 py-2.5 text-sm text-slate-400\">Thinkingâ€¦</div></div></div></div><!-- Input bar (sticky bottom) --><div class=\"border-t border-gray-200 bg-white px-4 py-3 flex-shrink-0\"><!-- Attachment chips --><div class=\"flex flex-wrap gap-2 mb-2\" x-show=\"attachments.length > 0\"><template x-for=\"(att, idx) in attachments\" :key=\"att.id\"><div class=\"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg text-xs text-slate-700\"><span>ğŸ“</span> <span x-text=\"att.name\" class=\"max-w-24 truncate\"></span> <button class=\"text-slate-400 hover:text-slate-600\" x-on:click=\"removeAttachment(idx)\">âœ•</button></div></template></div><div class=\"flex gap-2 items-end max-w-3xl mx-auto\"><!-- Paperclip button --><button class=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors flex-shrink-0\" x-on:click=\"$refs.fileInput.click()\" title=\"Attach image\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"></path></svg></button> <input type=\"file\" x-ref=\"fileInput\" accept=\"image/jpeg,image/png,image/webp\" multiple class=\"hidden\" x-on:change=\"handleFileSelect($event)\"><!-- Text input --><textarea x-model=\"input\" rows=\"1\" placeholder=\"Ask anythingâ€¦\" class=\"flex-1 text-sm border border-gray-200 rounded-xl px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-slate-400 max-h-32\" x-on:keydown.enter.exact.prevent=\"sendMessage()\" x-on:input=\"autoResize($event.target)\"></textarea><!-- Send button --><button class=\"p-2 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-colors flex-shrink-0 disabled:opacity-50\" x-on:click=\"sendMessage()\" x-bind:disabled=\"sending || input.trim() === ''\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"></path></svg></button></div></div></div><script>\r\n\t\tfunction chatHome() {\r\n\t\t\tconst STORAGE_KEY = 'chat_history';\r\n\t\t\tconst COMPANY_CODE = document.body.dataset.companyCode || '';\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmessages: [],\r\n\t\t\t\tinput: '',\r\n\t\t\t\tsending: false,\r\n\t\t\t\tattachments: [],  // {id, name, type}\r\n\r\n\t\t\t\tinit() {\r\n\t\t\t\t\tthis.loadHistory();\r\n\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t},\r\n\r\n\t\t\t\tloadHistory() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst raw = sessionStorage.getItem(STORAGE_KEY);\r\n\t\t\t\t\t\tif (raw) this.messages = JSON.parse(raw);\r\n\t\t\t\t\t} catch(e) { this.messages = []; }\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsaveHistory() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tsessionStorage.setItem(STORAGE_KEY, JSON.stringify(this.messages));\r\n\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tscrollToBottom() {\r\n\t\t\t\t\tconst thread = document.getElementById('chat-thread');\r\n\t\t\t\t\tif (thread) thread.scrollTop = thread.scrollHeight;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tautoResize(el) {\r\n\t\t\t\t\tel.style.height = 'auto';\r\n\t\t\t\t\tel.style.height = Math.min(el.scrollHeight, 128) + 'px';\r\n\t\t\t\t},\r\n\r\n\t\t\t\tquickSend(text) {\r\n\t\t\t\t\tthis.input = text;\r\n\t\t\t\t\tthis.sendMessage();\r\n\t\t\t\t},\r\n\r\n\t\t\t\ttoolLabel(tool) {\r\n\t\t\t\t\tconst labels = {\r\n\t\t\t\t\t\t'approve_po': 'Approve Purchase Order',\r\n\t\t\t\t\t\t'create_vendor': 'Create Vendor',\r\n\t\t\t\t\t\t'create_purchase_order': 'Create Purchase Order',\r\n\t\t\t\t\t\t'receive_po': 'Receive Goods Against PO',\r\n\t\t\t\t\t\t'record_vendor_invoice': 'Record Vendor Invoice',\r\n\t\t\t\t\t\t'pay_vendor': 'Pay Vendor',\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn labels[tool] || tool;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync handleFileSelect(event) {\r\n\t\t\t\t\tconst files = Array.from(event.target.files || []);\r\n\t\t\t\t\tevent.target.value = '';\r\n\t\t\t\t\tfor (const file of files) {\r\n\t\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\t\tformData.append('file', file);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst resp = await fetch('/chat/upload', { method: 'POST', body: formData });\r\n\t\t\t\t\t\t\tif (resp.ok) {\r\n\t\t\t\t\t\t\t\tconst results = await resp.json();\r\n\t\t\t\t\t\t\t\tfor (const r of (Array.isArray(results) ? results : [results])) {\r\n\t\t\t\t\t\t\t\t\tthis.attachments.push({ id: r.attachment_id, name: r.filename, type: r.file_type });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch(e) { console.error('Upload failed:', e); }\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tremoveAttachment(idx) {\r\n\t\t\t\t\tthis.attachments.splice(idx, 1);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync sendMessage() {\r\n\t\t\t\t\tconst text = this.input.trim();\r\n\t\t\t\t\tif (!text || this.sending) return;\r\n\r\n\t\t\t\t\tthis.messages.push({ role: 'user', type: 'text', text });\r\n\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\tthis.input = '';\r\n\t\t\t\t\tthis.sending = true;\r\n\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\r\n\t\t\t\t\tconst attachmentIDs = this.attachments.map(a => a.id);\r\n\t\t\t\t\tthis.attachments = [];\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst resp = await fetch('/chat', {\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t\t\t\tbody: JSON.stringify({ text, company_code: COMPANY_CODE, attachment_ids: attachmentIDs }),\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst reader = resp.body.getReader();\r\n\t\t\t\t\t\tconst decoder = new TextDecoder();\r\n\t\t\t\t\t\tlet buf = '';\r\n\t\t\t\t\t\tlet aiMsg = null;\r\n\r\n\t\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\t\tconst { done, value } = await reader.read();\r\n\t\t\t\t\t\t\tif (done) break;\r\n\t\t\t\t\t\t\tbuf += decoder.decode(value, { stream: true });\r\n\t\t\t\t\t\t\tconst parts = buf.split('\\n\\n');\r\n\t\t\t\t\t\t\tbuf = parts.pop() || '';\r\n\t\t\t\t\t\t\tfor (const part of parts) {\r\n\t\t\t\t\t\t\t\tlet event = 'message', data = '';\r\n\t\t\t\t\t\t\t\tfor (const line of part.split('\\n')) {\r\n\t\t\t\t\t\t\t\t\tif (line.startsWith('event: ')) event = line.slice(7).trim();\r\n\t\t\t\t\t\t\t\t\telse if (line.startsWith('data: ')) data = line.slice(6);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!data) continue;\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tconst d = JSON.parse(data);\r\n\t\t\t\t\t\t\t\t\tif (event === 'answer') {\r\n\t\t\t\t\t\t\t\t\t\tif (!aiMsg) {\r\n\t\t\t\t\t\t\t\t\t\t\taiMsg = { role: 'ai', type: 'text', text: d.text || '' };\r\n\t\t\t\t\t\t\t\t\t\t\tthis.messages.push(aiMsg);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\taiMsg.text = (aiMsg.text || '') + (d.text || '');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t\t\t\t\t} else if (event === 'clarification') {\r\n\t\t\t\t\t\t\t\t\t\tthis.messages.push({ role: 'ai', type: 'text', text: 'â“ ' + (d.question || '') });\r\n\t\t\t\t\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t\t\t\t\t} else if (event === 'action_card') {\r\n\t\t\t\t\t\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\t\t\t\t\t\trole: 'ai', type: 'action_card',\r\n\t\t\t\t\t\t\t\t\t\t\ttoken: d.token, tool: d.tool, args: d.args,\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: 'pending',\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t\t\t\t\t} else if (event === 'proposal') {\r\n\t\t\t\t\t\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\t\t\t\t\t\trole: 'ai', type: 'proposal',\r\n\t\t\t\t\t\t\t\t\t\t\ttoken: d.token, proposal: d.proposal,\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: 'pending',\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t\t\t\t\t} else if (event === 'error') {\r\n\t\t\t\t\t\t\t\t\t\tthis.messages.push({ role: 'ai', type: 'text', text: 'âš  ' + (d.message || 'Error') });\r\n\t\t\t\t\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(err) {\r\n\t\t\t\t\t\tthis.messages.push({ role: 'ai', type: 'text', text: 'âš  Connection error: ' + err.message });\r\n\t\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tthis.sending = false;\r\n\t\t\t\t\t\tthis.$nextTick(() => this.scrollToBottom());\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tasync confirmAction(msg, action) {\r\n\t\t\t\t\tmsg.status = action === 'confirm' ? 'confirming' : 'cancelling';\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst resp = await fetch('/chat/confirm', {\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t\t\t\tbody: JSON.stringify({ token: msg.token, action }),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconst data = await resp.json();\r\n\t\t\t\t\t\tif (action === 'cancel') {\r\n\t\t\t\t\t\t\tmsg.status = 'cancelled';\r\n\t\t\t\t\t\t} else if (resp.ok && data.ok) {\r\n\t\t\t\t\t\t\tmsg.status = 'confirmed';\r\n\t\t\t\t\t\t\tconst result = data.result;\r\n\t\t\t\t\t\t\tmsg.resultText = (result && result.message) ? result.message : 'Done.';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmsg.status = 'error';\r\n\t\t\t\t\t\t\tmsg.resultText = data.error || 'Failed.';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tmsg.status = 'error';\r\n\t\t\t\t\t\tmsg.resultText = 'Network error.';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.saveHistory();\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.ChatLayout("AI Assistant", username, companyName, companyCode).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
